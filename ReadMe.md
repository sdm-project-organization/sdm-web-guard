# GUARD

###### Project MO



## 정의

Guard서비스는 Project MO에서 사용하는 조직 및 서비스와 권한 및 유저를 관리하는 플랫폼입니다.

Guard에선 Project MO의 인증 및 인가를 관리하진 않습니다.

별도의 OAuth서버에서 관리하며 필요에 따라 OAuth서버가 Guard서비스에게 정보를 요청합니다.

따라서 OAuth서버의 요청외에 별도의 관리자 페이지에서만 조직 및 서비스와 권한 및 유저를 관리할 수 있고 

모든 접근은 차단되어 있습니다.



## 인프라구조

Guard서비스는 중요정보를 관리하는 서비스이기 때문에 보안에 민감합니다.

OAuth서버를 통해 인증을 진행할 때 접근이 가능하며

별도로 Gateway를 통해서 인증된 유저(admin)만 접근이 가능합니다. ( 현재 별도의 Console 페이지는 준비되지 않음 )



따라서, OAuth서버에서 요청하는 인증 및 인가에 필요한 API와 관리자 페이지에서 필요한 CRUD API를 제공하고 있습니다.

자세한 부분은 Swagger를 통한 API 명세에서 확인이 가능합니다. [API 명세서 주소](http://google.com)

![1564963934983](assets/1564963934983.png)



## 데이터구조

### Role

유저에게 역할을 부여하는데 3가지 구성정보가 필요합니다.





### Hat

권한을 얻는 방법으로 2가지가 있습니다.

1. Role(역할)을 부여 받아 권한을 얻는 방법
2. Hat(임시역할)을 부여 받아 권한을 얻는 방법 - 임시적인방법

발급된 권한은 다시 회수하기가 어렵습니다. 따라서 Hat이라는 비즈니스 로직을 추가하여 임시 권한 부여에 사용하도록 추가 하였습니다.

![1564966043943](assets/1564966043943.png)



## 기능

- 조직 및 서비스 & 권한 및 유저에 대한 CURD API 
  - 유저 관리 (회원가입, 회원탈퇴 ...)
  - 권한 관리
  - 서비스 관리
  - 조직 관리
- 유저의 인증 & 인가 정보 API
- 조직의 인가 정보 API
- 아이디찾기
- 패스워드찾기



## 진행상황

- RESTful API 개발
- RESOURCE class 설계는 아직 진행하지 않음
 - RESOURCE class 설계시에 공통화가능할지
- 보안연동 (OAuth2)
